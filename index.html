<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZPanel</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="overlay" id="overlay"></div>
    <div class="sidebar" id="sidebar">
        <span class="close-sidebar" id="closeSidebar"><i class="fas fa-times"></i></span>
        <div class="sidebar-header"><h3>ZPanel Menu</h3></div>
        <ul class="sidebar-menu">
            <li><a href="#home" class="active"><i class="fas fa-home"></i> Home</a></li>
            <li><a href="#downloads"><i class="fas fa-download"></i> Downloads</a></li>
            <li><a href="#news"><i class="fas fa-newspaper"></i> News & Updates</a></li>
            <li><a href="#creators"><i class="fas fa-users"></i> Creators</a></li>
            <li><a href="#all-videos"><i class="fas fa-film"></i> All Videos</a></li>
            <li><a href="#customize"><i class="fas fa-paint-brush"></i> Customize</a></li>
        </ul>
        <div class="customization-section">
            <h5 class="mb-3 text-center">Customize Theme</h5>
            <div class="mb-3">
                <label for="primaryColorPicker" class="form-label">Primary Color:</label>
                <input type="color" class="form-control form-control-color" id="primaryColorPicker" value="#6200ea" title="Choose primary color">
            </div>
            <div class="mb-3">
                <label for="secondaryColorPicker" class="form-label">Secondary Color:</label>
                <input type="color" class="form-control form-control-color" id="secondaryColorPicker" value="#03dac6" title="Choose secondary color">
            </div>
            <div class="mb-3">
                <label for="accentColorPicker" class="form-label">Accent Color:</label>
                <input type="color" class="form-control form-control-color" id="accentColorPicker" value="#ff4081" title="Choose accent color">
            </div>
            <div class="d-grid gap-2 mt-4">
                <button class="btn btn-primary" id="resetColors">Reset Colors</button>
            </div>
        </div>
    </div>
    <nav class="navbar navbar-expand-lg navbar-dark sticky-top">
        <div class="container">
            <a class="navbar-brand" href="#home"><i class="fas fa-gamepad logo-icon"></i>ZPanel</a>
            <button class="navbar-toggler" type="button" id="sidebarToggle"><i class="fas fa-bars"></i></button>
        </div>
    </nav>
    <section class="hero-section" id="home">
        <div class="container">
            <h1 class="hero-title">ZPanel Gaming Enhancement</h1>
            <p class="hero-subtitle">Take your gaming experience to the next level</p>
            <a href="#downloads" class="btn btn-primary btn-lg pulse-animation"><i class="fas fa-download me-2"></i>Download Now</a>
        </div>
    </section>
    <div class="container">
        <section class="mb-5 pt-3" id="downloads">
            <h2 class="section-title">Downloads</h2>
            <div class="alert alert-warning mb-4" role="alert">
                <i class="fas fa-exclamation-triangle me-2"></i>
                <strong>Important:</strong> You must download the modified Game Guardian (GG) first. The ZPanel script will only work with this modified version of Game Guardian.
            </div>
            <div class="row">
                <div class="col-md-6">
                    <div class="card download-card">
                        <div class="card-body">
                            <i class="fas fa-shield-alt download-icon"></i>
                            <h3 class="card-title">Game Guardian (Modified)</h3>
                            <p class="card-text">Enhanced version of Game Guardian required for ZPanel to function properly.</p>
                            <a href="/gg.apk" class="btn btn-primary mt-3" download><i class="fas fa-download me-2"></i>Download GG.apk</a>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card download-card">
                        <div class="card-body">
                            <i class="fas fa-code download-icon"></i>
                            <h3 class="card-title">ZPanel Script</h3>
                            <p class="card-text">Latest version of ZPanel script for enhanced gaming experience.</p>
                            <a href="/Zpanel_BG_1_9_0.dex" class="btn btn-primary mt-3" download><i class="fas fa-download me-2"></i>Download Zpanel_BG_1_9_0.dex</a>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <section class="mb-5 pt-3" id="news">
            <h2 class="section-title">News & Updates</h2>
            <div class="row">
                <div class="col-md-4 mb-4">
                    <div class="card">
                        <div class="card-body">
                            <h3 class="card-title mb-3">Quick Start Guide</h3>
                            <div class="video-container position-relative" style="cursor: pointer;" onclick="showVideoModal('A0jSHRu_dL4', 'Quick Start Guide')">
                                <img src="https://img.youtube.com/vi/A0jSHRu_dL4/maxresdefault.jpg" alt="Quick Start Guide" class="img-fluid w-100">
                                <div class="play-button" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 3rem; color: white; text-shadow: 0 0 10px rgba(0,0,0,0.5);"><i class="fas fa-play-circle"></i></div>
                            </div>
                            <p class="card-text">Short tutorial on how to execute the ZPanel script correctly.</p>
                            <button class="btn btn-primary btn-sm w-100" onclick="showVideoModal('A0jSHRu_dL4', 'Quick Start Guide')"><i class="fas fa-play me-1"></i> Watch Video</button>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="card">
                        <div class="card-body">
                            <h3 class="card-title mb-3">Full Tutorial</h3>
                            <div class="video-container position-relative" style="cursor: pointer;" onclick="showVideoModal('QdsMyilHQ0Q', 'Full Tutorial')">
                                <img src="https://img.youtube.com/vi/QdsMyilHQ0Q/maxresdefault.jpg" alt="Full Tutorial" class="img-fluid w-100">
                                <div class="play-button" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 3rem; color: white; text-shadow: 0 0 10px rgba(0,0,0,0.5);"><i class="fas fa-play-circle"></i></div>
                            </div>
                            <p class="card-text">Comprehensive guide on setting up and using ZPanel effectively.</p>
                            <button class="btn btn-primary btn-sm w-100" onclick="showVideoModal('QdsMyilHQ0Q', 'Full Tutorial')"><i class="fas fa-play me-1"></i> Watch Video</button>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="card">
                        <div class="card-body">
                            <h3 class="card-title mb-3">Features Demo</h3>
                            <div class="video-container position-relative" style="cursor: pointer;" onclick="showVideoModal('MhZ5CovDAtk', 'Features Demo')">
                                <img src="https://img.youtube.com/vi/MhZ5CovDAtk/maxresdefault.jpg" alt="Features Demo" class="img-fluid w-100">
                                <div class="play-button" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 3rem; color: white; text-shadow: 0 0 10px rgba(0,0,0,0.5);"><i class="fas fa-play-circle"></i></div>
                            </div>
                            <p class="card-text">Showcase of the latest features and capabilities of ZPanel.</p>
                            <button class="btn btn-primary btn-sm w-100" onclick="showVideoModal('MhZ5CovDAtk', 'Features Demo')"><i class="fas fa-play me-1"></i> Watch Video</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="card text-center mb-4">
                <div class="card-body">
                    <h3 class="card-title">Join Our Discord Community</h3>
                    <p class="card-text">Get support, share tips, and connect with other ZPanel users.</p>
                    <a href="https://discord.gg/e3hutmSG3G" target="_blank" class="btn btn-primary mt-3"><i class="fab fa-discord me-2"></i>Join Discord Server</a>
                </div>
            </div>
        </section>
        <section class="mb-5 pt-3" id="creators">
            <h2 class="section-title">Meet The Creators</h2>
            <div class="row">
                <div class="col-md-6">
                    <div class="card creator-card">
                        <div class="creator-avatar"><i class="fab fa-youtube"></i></div>
                        <h3 class="creator-name">Zynxus</h3>
                        <p class="card-text">ZPanel Co-Creator & Developer</p>
                        <a href="https://www.youtube.com/@zynxus?si=5XO1eYCH-P8dlhNd" target="_blank" class="btn btn-primary mt-3"><i class="fab fa-youtube me-2"></i>Visit Channel</a>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card creator-card">
                        <div class="creator-avatar"><i class="fab fa-youtube"></i></div>
                        <h3 class="creator-name">Madara Hex</h3>
                        <p class="card-text">ZPanel Co-Creator & Developer</p>
                        <a href="https://youtube.com/@madara_hex?si=A-REoqC--rjcgQqn" target="_blank" class="btn btn-primary mt-3"><i class="fab fa-youtube me-2"></i>Visit Channel</a>
                    </div>
                </div>
            </div>
        </section>
        <section class="mb-5 pt-3" id="all-videos">
            <h2 class="section-title">All Creator Videos</h2>
            <ul class="nav nav-tabs mb-4" id="creatorTabs" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="zynxus-tab" data-bs-toggle="tab" data-bs-target="#zynxus-videos" type="button" role="tab" aria-controls="zynxus-videos" aria-selected="true">Zynxus Videos</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="madara-tab" data-bs-toggle="tab" data-bs-target="#madara-videos" type="button" role="tab" aria-controls="madara-videos" aria-selected="false">Madara Hex Videos</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="blockman-tab" data-bs-toggle="tab" data-bs-target="#blockman-videos" type="button" role="tab" aria-controls="blockman-videos" aria-selected="false">Blockman Go Admin Panel</button>
                </li>
            </ul>
            <div class="tab-content" id="creatorTabsContent">
                <div class="tab-pane fade show active" id="zynxus-videos" role="tabpanel" aria-labelledby="zynxus-tab">
                    <div class="row videos-container" id="zynxus-videos-container">
                        <div class="col-12 text-center">
                            <div class="spinner-border text-primary" role="status"><span class="visually-hidden">Loading...</span></div>
                            <p class="mt-2">Loading Zynxus videos...</p>
                        </div>
                    </div>
                </div>
                <div class="tab-pane fade" id="madara-videos" role="tabpanel" aria-labelledby="madara-tab">
                    <div class="row videos-container" id="madara-videos-container">
                        <div class="col-12 text-center">
                            <div class="spinner-border text-primary" role="status"><span class="visually-hidden">Loading...</span></div>
                            <p class="mt-2">Loading Madara Hex videos...</p>
                        </div>
                    </div>
                </div>
                <div class="tab-pane fade" id="blockman-videos" role="tabpanel" aria-labelledby="blockman-tab">
                    <div class="row videos-container" id="blockman-videos-container">
                        <div class="col-12 text-center">
                            <div class="spinner-border text-primary" role="status"><span class="visually-hidden">Loading...</span></div>
                            <p class="mt-2">Loading Blockman Go Admin Panel videos...</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <section class="mb-5 pt-3" id="customize">
            <h2 class="section-title">Customize Your Experience</h2>
            <div class="card">
                <div class="card-body">
                    <p class="card-text text-center mb-4">Select from our preset themes or create your own custom color scheme.</p>
                    <div class="row mb-4">
                        <div class="col text-center">
                            <h5 class="mb-3">Preset Themes</h5>
                            <div class="color-option" style="background-color: #6200ea;" data-primary="#6200ea" data-secondary="#03dac6" data-accent="#ff4081" title="Default"></div>
                            <div class="color-option" style="background-color: #ff5722;" data-primary="#ff5722" data-secondary="#ffeb3b" data-accent="#4caf50" title="Sunset"></div>
                            <div class="color-option" style="background-color: #2196f3;" data-primary="#2196f3" data-secondary="#64ffda" data-accent="#f50057" title="Ocean"></div>
                            <div class="color-option" style="background-color: #9c27b0;" data-primary="#9c27b0" data-secondary="#00bcd4" data-accent="#ffc107" title="Mystic"></div>
                            <div class="color-option" style="background-color: #f44336;" data-primary="#f44336" data-secondary="#8bc34a" data-accent="#00bcd4" title="Fire"></div>
                        </div>
                    </div>
                    <div class="row mt-4">
                        <div class="col-md-4 mb-3">
                            <label for="primaryCustom" class="form-label">Primary Color</label>
                            <input type="color" class="form-control form-control-color w-100" id="primaryCustom" value="#6200ea">
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="secondaryCustom" class="form-label">Secondary Color</label>
                            <input type="color" class="form-control form-control-color w-100" id="secondaryCustom" value="#03dac6">
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="accentCustom" class="form-label">Accent Color</label>
                            <input type="color" class="form-control form-control-color w-100" id="accentCustom" value="#ff4081">
                        </div>
                    </div>
                    <div class="text-center mt-3">
                        <button class="btn btn-primary" id="applyCustomColors"><i class="fas fa-paint-brush me-2"></i>Apply Custom Colors</button>
                        <button class="btn btn-outline-secondary ms-2" id="resetCustomColors"><i class="fas fa-undo me-2"></i>Reset to Default</button>
                    </div>
                </div>
            </div>
        </section>
    </div>
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <h3 class="mb-3">ZPanel</h3>
                    <p class="footer-text">A powerful gaming enhancement tool designed to improve your gaming experience.</p>
                </div>
                <div class="col-md-6 text-md-end">
                    <h3 class="mb-3">Connect With Us</h3>
                    <a href="https://discord.gg/e3hutmSG3G" target="_blank" class="social-icon"><i class="fab fa-discord"></i></a>
                    <a href="https://www.youtube.com/@zynxus?si=5XO1eYCH-P8dlhNd" target="_blank" class="social-icon"><i class="fab fa-youtube"></i></a>
                </div>
            </div>
            <hr class="mt-4 mb-4" style="background-color: rgba(255, 255, 255, 0.1);">
            <p class="text-center footer-text mb-0">&copy; 2025 ZPanel. All rights reserved.</p>
        </div>
    </footer>
    <button class="back-to-top" id="backToTop"><i class="fas fa-arrow-up"></i></button>
    <button class="dark-mode-toggle" id="darkModeToggle"><i class="fas fa-moon"></i></button>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('overlay');
            const sidebarToggle = document.getElementById('sidebarToggle');
            const closeSidebar = document.getElementById('closeSidebar');
            
            sidebarToggle.addEventListener('click', function() {
                sidebar.classList.add('active');
                overlay.classList.add('active');
                document.body.style.overflow = 'hidden';
            });
            
            function closeSidebarFunc() {
                sidebar.classList.remove('active');
                overlay.classList.remove('active');
                document.body.style.overflow = '';
            }
            
            closeSidebar.addEventListener('click', closeSidebarFunc);
            overlay.addEventListener('click', closeSidebarFunc);
            
            const sidebarLinks = document.querySelectorAll('.sidebar-menu a');
            sidebarLinks.forEach(link => {
                link.addEventListener('click', function() {
                    sidebarLinks.forEach(l => l.classList.remove('active'));
                    this.classList.add('active');
                    closeSidebarFunc();
                });
            });
            
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href');
                    if (targetId === '#') return;
                    const targetElement = document.querySelector(targetId);
                    if (targetElement) {
                        window.scrollTo({
                            top: targetElement.offsetTop - 70,
                            behavior: 'smooth'
                        });
                    }
                });
            });
            
            const colorOptions = document.querySelectorAll('.color-option');
            colorOptions.forEach(option => {
                option.addEventListener('click', function() {
                    const primaryColor = this.getAttribute('data-primary');
                    const secondaryColor = this.getAttribute('data-secondary');
                    const accentColor = this.getAttribute('data-accent');
                    applyThemeColors(primaryColor, secondaryColor, accentColor);
                    updateColorInputs(primaryColor, secondaryColor, accentColor);
                });
            });
            
            const applyCustomColorBtn = document.getElementById('applyCustomColors');
            applyCustomColorBtn.addEventListener('click', function() {
                const primaryColor = document.getElementById('primaryCustom').value;
                const secondaryColor = document.getElementById('secondaryCustom').value;
                const accentColor = document.getElementById('accentCustom').value;
                applyThemeColors(primaryColor, secondaryColor, accentColor);
            });
            
            const resetCustomColorsBtn = document.getElementById('resetCustomColors');
            const resetColorsBtn = document.getElementById('resetColors');
            
            function resetColors() {
                const defaultPrimary = '#6200ea';
                const defaultSecondary = '#03dac6';
                const defaultAccent = '#ff4081';
                applyThemeColors(defaultPrimary, defaultSecondary, defaultAccent);
                updateColorInputs(defaultPrimary, defaultSecondary, defaultAccent);
            }
            
            resetCustomColorsBtn.addEventListener('click', resetColors);
            resetColorsBtn.addEventListener('click', resetColors);
            
            function applyThemeColors(primary, secondary, accent) {
                document.documentElement.style.setProperty('--primary-color', primary);
                document.documentElement.style.setProperty('--secondary-color', secondary);
                document.documentElement.style.setProperty('--accent-color', accent);
                localStorage.setItem('zpanel-primary-color', primary);
                localStorage.setItem('zpanel-secondary-color', secondary);
                localStorage.setItem('zpanel-accent-color', accent);
            }
            
            function updateColorInputs(primary, secondary, accent) {
                document.getElementById('primaryCustom').value = primary;
                document.getElementById('secondaryCustom').value = secondary;
                document.getElementById('accentCustom').value = accent;
                document.getElementById('primaryColorPicker').value = primary;
                document.getElementById('secondaryColorPicker').value = secondary;
                document.getElementById('accentColorPicker').value = accent;
            }
            
            function loadSavedColors() {
                const savedPrimary = localStorage.getItem('zpanel-primary-color');
                const savedSecondary = localStorage.getItem('zpanel-secondary-color');
                const savedAccent = localStorage.getItem('zpanel-accent-color');
                const savedDarkMode = localStorage.getItem('zpanel-dark-mode');
                if (savedPrimary && savedSecondary && savedAccent) {
                    applyThemeColors(savedPrimary, savedSecondary, savedAccent);
                    updateColorInputs(savedPrimary, savedSecondary, savedAccent);
                }
                if (savedDarkMode === 'light') {
                    toggleDarkMode();
                }
            }
            
            loadSavedColors();
            
            const primaryColorPicker = document.getElementById('primaryColorPicker');
            const secondaryColorPicker = document.getElementById('secondaryColorPicker');
            const accentColorPicker = document.getElementById('accentColorPicker');
            
            primaryColorPicker.addEventListener('input', function() {
                document.documentElement.style.setProperty('--primary-color', this.value);
                document.getElementById('primaryCustom').value = this.value;
            });
            
            secondaryColorPicker.addEventListener('input', function() {
                document.documentElement.style.setProperty('--secondary-color', this.value);
                document.getElementById('secondaryCustom').value = this.value;
            });
            
            accentColorPicker.addEventListener('input', function() {
                document.documentElement.style.setProperty('--accent-color', this.value);
                document.getElementById('accentCustom').value = this.value;
            });
            
            const backToTopButton = document.getElementById('backToTop');
            window.addEventListener('scroll', function() {
                if (window.pageYOffset > 300) {
                    backToTopButton.classList.add('visible');
                } else {
                    backToTopButton.classList.remove('visible');
                }
            });
            
            backToTopButton.addEventListener('click', function() {
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            });
            
            const darkModeToggle = document.getElementById('darkModeToggle');
            let isDarkMode = true;
            
            function toggleDarkMode() {
                if (isDarkMode) {
                    document.documentElement.style.setProperty('--dark-color', '#f5f5f5');
                    document.documentElement.style.setProperty('--light-color', '#121212');
                    document.documentElement.style.setProperty('--text-color', '#121212');
                    darkModeToggle.innerHTML = '<i class="fas fa-sun"></i>';
                    localStorage.setItem('zpanel-dark-mode', 'light');
                } else {
                    document.documentElement.style.setProperty('--dark-color', '#121212');
                    document.documentElement.style.setProperty('--light-color', '#f5f5f5');
                    document.documentElement.style.setProperty('--text-color', '#ffffff');
                    darkModeToggle.innerHTML = '<i class="fas fa-moon"></i>';
                    localStorage.setItem('zpanel-dark-mode', 'dark');
                }
                isDarkMode = !isDarkMode;
            }
            
            darkModeToggle.addEventListener('click', toggleDarkMode);
            
            document.querySelectorAll('form').forEach(form => {
                form.addEventListener('submit', e => {
                    e.preventDefault();
                });
            });
            
            async function getYouTubeApiKey() {
                return 'AIzaSyABlnNv-qdslEwwGQxeErvDPZxcW8W3BYo';
            }
            
            async function fetchYouTubeVideos() {
                try {
                    const apiKey = await getYouTubeApiKey();
                    if (!apiKey) throw new Error('Could not retrieve API key');
                    
                    const zynxusVideos = await getChannelVideos('zynxus', apiKey);
                    const zynxusContainer = document.getElementById('zynxus-videos-container');
                    populateVideos(zynxusContainer, zynxusVideos);
                    
                    const madaraVideos = await getChannelVideos('madara_hex', apiKey);
                    const madaraContainer = document.getElementById('madara-videos-container');
                    populateVideos(madaraContainer, madaraVideos);
                    
                    const blockmanVideos = await searchYouTubeVideos('blockman go admin panel', apiKey);
                    const blockmanContainer = document.getElementById('blockman-videos-container');
                    populateVideos(blockmanContainer, blockmanVideos);
                } catch (error) {
                    console.error('Error fetching videos:', error);
                    document.getElementById('zynxus-videos-container').innerHTML = '<div class="col-12 text-center"><p class="text-danger">Error loading videos. Please try again later.</p></div>';
                    document.getElementById('madara-videos-container').innerHTML = '<div class="col-12 text-center"><p class="text-danger">Error loading videos. Please try again later.</p></div>';
                    document.getElementById('blockman-videos-container').innerHTML = '<div class="col-12 text-center"><p class="text-danger">Error loading videos. Please try again later.</p></div>';
                }
            }
            
            async function searchYouTubeVideos(query, apiKey) {
                try {
                    const searchUrl = `https://www.googleapis.com/youtube/v3/search?part=snippet&q=${encodeURIComponent(query)}&maxResults=15&type=video&key=${apiKey}`;
                    const searchResponse = await fetch(searchUrl);
                    if (!searchResponse.ok) throw new Error(`Search failed: ${searchResponse.status} ${searchResponse.statusText}`);
                    const searchData = await searchResponse.json();
                    if (!searchData.items || searchData.items.length === 0) {
                        console.warn(`No videos found for search: ${query}`);
                        return [];
                    }
                    return searchData.items.map(item => ({
                        id: item.id.videoId,
                        title: item.snippet.title,
                        thumbnail: item.snippet.thumbnails.high.url,
                        publishedAt: item.snippet.publishedAt
                    }));
                } catch (error) {
                    console.error(`Error searching videos for "${query}":`, error);
                    return [];
                }
            }
            
            async function getChannelVideos(channelUsername, apiKey) {
                try {
                    const searchUrl = `https://www.googleapis.com/youtube/v3/search?part=snippet&q=${channelUsername}&type=channel&key=${apiKey}`;
                    const searchResponse = await fetch(searchUrl);
                    if (!searchResponse.ok) throw new Error(`Channel search failed: ${searchResponse.status} ${searchResponse.statusText}`);
                    const searchData = await searchResponse.json();
                    if (!searchData.items || searchData.items.length === 0) {
                        console.warn(`No channel found for username: ${channelUsername}`);
                        return [];
                    }
                    const channelId = searchData.items[0].id.channelId;
                    const videosUrl = `https://www.googleapis.com/youtube/v3/search?part=snippet&channelId=${channelId}&maxResults=10&order=date&type=video&key=${apiKey}`;
                    const videosResponse = await fetch(videosUrl);
                    if (!videosResponse.ok) throw new Error(`Video search failed: ${videosResponse.status} ${videosResponse.statusText}`);
                    const videosData = await videosResponse.json();
                    if (videosData.error) throw new Error(`API Error: ${videosData.error.message || 'Unknown API error'}`);
                    if (!videosData.items) {
                        console.warn(`No videos found for channel: ${channelUsername}`);
                        return [];
                    }
                    return videosData.items.map(item => ({
                        id: item.id.videoId,
                        title: item.snippet.title,
                        thumbnail: item.snippet.thumbnails.high.url,
                        publishedAt: item.snippet.publishedAt
                    }));
                } catch (error) {
                    console.error(`Error getting videos for ${channelUsername}:`, error);
                    return [];
                }
            }
            
            function populateVideos(container, videos) {
                container.innerHTML = '';
                if (!videos || videos.length === 0) {
                    container.innerHTML = '<div class="col-12 text-center"><p>No videos found for this creator.</p></div>';
                    return;
                }
                videos.forEach(video => {
                    const videoCard = document.createElement('div');
                    videoCard.className = 'col-md-4 col-sm-6 mb-4';
                    const publishDate = new Date(video.publishedAt).toLocaleDateString();
                    videoCard.innerHTML = `
                        <div class="card h-100">
                            <div class="video-container" style="padding-bottom: 56.25%; height: 0; position: relative;">
                                <img src="${video.thumbnail}" alt="${video.title}" class="img-fluid" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; cursor: pointer;">
                                <div class="play-button" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 3rem; color: white; text-shadow: 0 0 10px rgba(0,0,0,0.5);">
                                    <i class="fas fa-play-circle"></i>
                                </div>
                            </div>
                            <div class="card-body">
                                <h5 class="card-title" style="font-size: 1rem; line-height: 1.4;">${video.title}</h5>
                                <p class="card-text"><small class="text-muted">Published: ${publishDate}</small></p>
                                <div class="d-flex justify-content-between">
                                    <button class="btn btn-primary btn-sm play-inline-btn" data-video-id="${video.id}" data-video-title="${video.title.replace(/"/g, '&quot;')}">
                                        <i class="fas fa-play me-1"></i> Play Video
                                    </button>
                                    <a href="https://www.youtube.com/watch?v=${video.id}" target="_blank" class="btn btn-outline-secondary btn-sm">
                                        <i class="fab fa-youtube me-1"></i> YouTube
                                    </a>
                                </div>
                            </div>
                        </div>
                    `;
                    container.appendChild(videoCard);
                    const playButtons = [
                        videoCard.querySelector('img'),
                        videoCard.querySelector('.play-button'),
                        videoCard.querySelector('.play-inline-btn')
                    ];
                    playButtons.forEach(btn => {
                        if (btn) {
                            btn.addEventListener('click', function() {
                                showVideoModal(video.id, video.title);
                            });
                        }
                    });
                });
            }
            
            window.showVideoModal = async function(videoId, videoTitle) {
                let modalContainer = document.getElementById('video-modal-container');
                if (modalContainer) document.body.removeChild(modalContainer);
                modalContainer = document.createElement('div');
                modalContainer.id = 'video-modal-container';
                modalContainer.style.cssText = 'position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.8); z-index: 9999; display: flex; justify-content: center; align-items: center;';
                const modalContent = document.createElement('div');
                modalContent.style.cssText = 'width: 90%; max-width: 1000px; max-height: 90vh; background-color: var(--dark-color); border-radius: 8px; overflow-y: auto; position: relative;';
                const closeButton = document.createElement('button');
                closeButton.innerHTML = '<i class="fas fa-times"></i>';
                closeButton.style.cssText = 'position: absolute; top: 10px; right: 10px; background-color: rgba(0,0,0,0.5); color: white; border: none; width: 30px; height: 30px; border-radius: 50%; cursor: pointer; z-index: 10;';
                closeButton.addEventListener('click', () => { document.body.removeChild(modalContainer); });
                const titleElement = document.createElement('h4');
                titleElement.textContent = videoTitle;
                titleElement.style.cssText = 'padding: 10px 15px; color: var(--text-color); margin: 0; font-size: 1.2rem;';
                const videoWrapper = document.createElement('div');
                videoWrapper.style.cssText = 'position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;';
                const iframe = document.createElement('iframe');
                iframe.src = `https://www.youtube.com/embed/${videoId}?autoplay=1&rel=0`;
                iframe.style.cssText = 'position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none;';
                iframe.setAttribute('allowfullscreen', '');
                iframe.setAttribute('allow', 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture');
                const loadingIndicator = document.createElement('div');
                loadingIndicator.className = 'text-center my-3';
                loadingIndicator.innerHTML = `
                    <div class="spinner-border text-primary" role="status">
                        <span class="visually-hidden">Loading video details...</span>
                    </div>
                    <p class="mt-2">Loading video details...</p>
                `;
                const detailsContainer = document.createElement('div');
                detailsContainer.className = 'video-details p-3';
                videoWrapper.appendChild(iframe);
                modalContent.appendChild(closeButton);
                modalContent.appendChild(titleElement);
                modalContent.appendChild(videoWrapper);
                modalContent.appendChild(loadingIndicator);
                modalContent.appendChild(detailsContainer);
                modalContainer.appendChild(modalContent);
                document.body.appendChild(modalContainer);
                modalContainer.addEventListener('click', (e) => {
                    if (e.target === modalContainer) document.body.removeChild(modalContainer);
                });
                document.addEventListener('keydown', function closeModal(e) {
                    if (e.key === 'Escape') {
                        if (document.body.contains(modalContainer)) document.body.removeChild(modalContainer);
                        document.removeEventListener('keydown', closeModal);
                    }
                });
                try {
                    const apiKey = await getYouTubeApiKey();
                    if (!apiKey) throw new Error('Could not retrieve API key');
                    const videoDetailsUrl = `https://www.googleapis.com/youtube/v3/videos?part=snippet,statistics&id=${videoId}&key=${apiKey}`;
                    const videoResponse = await fetch(videoDetailsUrl);
                    const videoData = await videoResponse.json();
                    if (!videoData.items || videoData.items.length === 0) throw new Error('Video details not found');
                    const videoDetails = videoData.items[0];
                    const channelId = videoDetails.snippet.channelId;
                    const channelUrl = `https://www.googleapis.com/youtube/v3/channels?part=snippet,statistics&id=${channelId}&key=${apiKey}`;
                    const channelResponse = await fetch(channelUrl);
                    const channelData = await channelResponse.json();
                    const commentsUrl = `https://www.googleapis.com/youtube/v3/commentThreads?part=snippet&videoId=${videoId}&maxResults=10&key=${apiKey}`;
                    const commentsResponse = await fetch(commentsUrl);
                    const commentsData = await commentsResponse.json();
                    modalContent.removeChild(loadingIndicator);
                    const channelInfo = channelData.items[0];
                    const videoStats = videoDetails.statistics;
                    const videoSnippet = videoDetails.snippet;
                    const publishDate = new Date(videoSnippet.publishedAt).toLocaleDateString();
                    const description = videoSnippet.description.replace(/\n/g, '<br>');
                    const videoInfoHTML = `
                        <div class="video-info mb-4">
                            <div class="d-flex align-items-center mb-3">
                                <img src="${channelInfo.snippet.thumbnails.default.url}" alt="${channelInfo.snippet.title}" 
                                     class="rounded-circle me-2" style="width: 50px; height: 50px;">
                                <div>
                                    <h5 class="mb-0">${channelInfo.snippet.title}</h5>
                                    <small>${channelInfo.statistics.subscriberCount} subscribers</small>
                                </div>
                                <a href="https://www.youtube.com/channel/${channelId}" target="_blank" 
                                   class="btn btn-outline-primary btn-sm ms-auto">
                                    <i class="fab fa-youtube me-1"></i> Visit Channel
                                </a>
                            </div>
                            <div class="video-stats d-flex mb-3">
                                <div class="me-3">
                                    <i class="fas fa-thumbs-up me-1"></i> ${videoStats.likeCount || '0'} likes
                                </div>
                                <div class="me-3">
                                    <i class="fas fa-eye me-1"></i> ${videoStats.viewCount || '0'} views
                                </div>
                                <div>
                                    <i class="fas fa-calendar-alt me-1"></i> Published: ${publishDate}
                                </div>
                            </div>
                            <div class="video-description mb-3">
                                <h6>Description:</h6>
                                <div class="description-text p-2 rounded" style="background-color: rgba(0,0,0,0.1); max-height: 150px; overflow-y: auto;">
                                    ${description}
                                </div>
                            </div>
                        </div>
                    `;
                    let commentsHTML = `
                        <div class="comments-section">
                            <h6 class="mb-3">Comments:</h6>
                            <div class="comments-notice mb-3 p-2 rounded" style="background-color: rgba(98, 0, 234, 0.1);">
                                <small><i class="fas fa-info-circle me-1"></i> You can view comments but cannot post new ones from this site.</small>
                            </div>
                    `;
                    if (commentsData.items && commentsData.items.length > 0) {
                        commentsData.items.forEach(item => {
                            const comment = item.snippet.topLevelComment.snippet;
                            const commentDate = new Date(comment.publishedAt).toLocaleDateString();
                            commentsHTML += `
                                <div class="comment mb-3 p-2 rounded" style="background-color: rgba(0,0,0,0.1);">
                                    <div class="d-flex mb-2">
                                        <img src="${comment.authorProfileImageUrl}" alt="${comment.authorDisplayName}" 
                                             class="rounded-circle me-2" style="width: 40px; height: 40px;">
                                        <div>
                                            <div class="fw-bold">${comment.authorDisplayName}</div>
                                            <small>${commentDate}</small>
                                        </div>
                                    </div>
                                    <div class="comment-text">${comment.textDisplay}</div>
                                    <div class="mt-1">
                                        <small><i class="fas fa-thumbs-up me-1"></i> ${comment.likeCount}</small>
                                    </div>
                                </div>
                            `;
                        });
                    } else {
                        commentsHTML += `<p>No comments found for this video.</p>`;
                    }
                    commentsHTML += `</div>`;
                    detailsContainer.innerHTML = videoInfoHTML + commentsHTML;
                } catch (error) {
                    console.error('Error fetching video details:', error);
                    modalContent.removeChild(loadingIndicator);
                    detailsContainer.innerHTML = `
                        <div class="alert alert-warning">
                            <p><i class="fas fa-exclamation-triangle me-2"></i> Could not load video details.</p>
                            <p>Error: ${error.message}</p>
                        </div>
                    `;
                }
            }
            fetchYouTubeVideos();
        });
    </script>
</body>
</html>